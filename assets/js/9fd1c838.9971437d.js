"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[359],{3905:(e,n,t)=>{t.r(n),t.d(n,{MDXContext:()=>l,MDXProvider:()=>u,mdx:()=>g,useMDXComponents:()=>c,withMDXComponents:()=>p});var o=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(){return i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i.apply(this,arguments)}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=o.createContext({}),p=function(e){return function(n){var t=c(n.components);return o.createElement(e,i({},n,{components:t}))}},c=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},f=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,a=e.parentName,l=d(e,["components","mdxType","originalType","parentName"]),p=c(t),u=r,f=p["".concat(a,".").concat(u)]||p[u]||m[u]||i;return t?o.createElement(f,s(s({ref:n},l),{},{components:t})):o.createElement(f,s({ref:n},l))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,a=new Array(i);a[0]=f;var s={};for(var d in n)hasOwnProperty.call(n,d)&&(s[d]=n[d]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var l=2;l<i;l++)a[l]=t[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}f.displayName="MDXCreateElement"},43204:(e,n,t)=>{t.r(n),t.d(n,{frontMatter:()=>s,contentTitle:()=>d,metadata:()=>l,toc:()=>p,default:()=>g});var o=t(83117),r=t(80102),i=(t(67294),t(3905)),a=["components"],s={id:"android",title:"Troubleshooting Android Issues",sidebar_label:"Android Issues",custom_edit_url:"https://www.internalfb.com/intern/diffusion/FBS/browsefile/master/xplat/sonar/docs/getting-started/troubleshooting/android.mdx"},d=void 0,l={unversionedId:"getting-started/troubleshooting/android",id:"getting-started/troubleshooting/android",isDocsHomePage:!1,title:"Troubleshooting Android Issues",description:"Flipper is a work in progress and issues may occur. This page contains known issues associated with the Android platform and provides steps you can take to try to resolve them.",source:"@site/../docs/getting-started/troubleshooting/android.mdx",sourceDirName:"getting-started/troubleshooting",slug:"/getting-started/troubleshooting/android",permalink:"/docs/getting-started/troubleshooting/android",editUrl:"https://www.internalfb.com/intern/diffusion/FBS/browsefile/master/xplat/sonar/docs/getting-started/troubleshooting/android.mdx",tags:[],version:"current",frontMatter:{id:"android",title:"Troubleshooting Android Issues",sidebar_label:"Android Issues",custom_edit_url:"https://www.internalfb.com/intern/diffusion/FBS/browsefile/master/xplat/sonar/docs/getting-started/troubleshooting/android.mdx"},sidebar:"setup",previous:{title:"General Issues",permalink:"/docs/getting-started/troubleshooting/general"},next:{title:"iOS Issues",permalink:"/docs/getting-started/troubleshooting/ios"}},p=[{value:"In-app diagnostics",id:"in-app-diagnostics",children:[],level:2},{value:"Exception from call site #4 bootstrap method",id:"exception-from-call-site-4-bootstrap-method",children:[],level:2},{value:"Duplicate class <code>com.facebook.jni.*</code>",id:"duplicate-class-comfacebookjni",children:[],level:2}],c=function(e){return function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",n)}},u=c("InternalAndroid"),m=c("OssOnly"),f={toc:p};function g(e){var n=e.components,t=(0,r.Z)(e,a);return(0,i.mdx)("wrapper",(0,o.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("p",null,"Flipper is a work in progress and issues may occur. This page contains known issues associated with the Android platform and provides steps you can take to try to resolve them."),(0,i.mdx)(u,{mdxType:"InternalAndroid"}),(0,i.mdx)(m,{mdxType:"OssOnly"},(0,i.mdx)("h2",{id:"in-app-diagnostics"},"In-app diagnostics"),(0,i.mdx)("p",null,"The Flipper SDK includes an in-app connection diagnostics screen to help you diagnose problems."),(0,i.mdx)("p",null,"Replace ",(0,i.mdx)("inlineCode",{parentName:"p"},"<APP_PACKAGE>")," below with the package name of your app, for example, such as ",(0,i.mdx)("inlineCode",{parentName:"p"},"com.facebook.flipper.sample"),"."),(0,i.mdx)("p",null,"On a terminal, run the following:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"adb shell am start -n <APP_PACKAGE>/com.facebook.flipper.android.diagnostics.FlipperDiagnosticActivity\n")),(0,i.mdx)("p",null,"This will only work if you added ",(0,i.mdx)("inlineCode",{parentName:"p"},"FlipperDiagnosticActivity")," to your ",(0,i.mdx)("inlineCode",{parentName:"p"},"AndroidManifest.xml"),". See ",(0,i.mdx)("a",{parentName:"p",href:"/docs/getting-started/android-native#diagnostics"},"getting started")," for help."),(0,i.mdx)("h2",{id:"exception-from-call-site-4-bootstrap-method"},"Exception from call site #4 bootstrap method"),(0,i.mdx)("p",null,"Build error after including the Flipper dependency:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"Exception from call site #4 bootstrap method\n")),(0,i.mdx)("p",null,"This can happen because we include ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/square/okhttp/issues/4597#issuecomment-461204144"},"OkHttp3")," as dependency which makes use of Java 8 features. There are two ways of dealing with this:"),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"Enable Java 8 support")),(0,i.mdx)("p",null,"Add this to your Gradle config:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-groovy"},'android {\n  compileOptions {\n    targetCompatibility = "8"\n    sourceCompatibility = "8"\n   }\n }\n')),(0,i.mdx)("p",null," ",(0,i.mdx)("strong",{parentName:"p"},"Exclude the OkHttp3 dependency")),(0,i.mdx)("p",null," Alternatively, if you don't plan on making use of OkHttp, you can exclude the dependency from the build entirely:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"debugImplementation('com.facebook.flipper:flipper:*') {\n exclude group: 'com.squareup.okhttp3'\n}\n")),(0,i.mdx)("h2",{id:"duplicate-class-comfacebookjni"},"Duplicate class ",(0,i.mdx)("inlineCode",{parentName:"h2"},"com.facebook.jni.*")),(0,i.mdx)("p",null,"This can occur when mixing different versions of ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/facebookincubator/fbjni"},"FBJNI"),",\na library we use to interact with native C++ code."),(0,i.mdx)("p",null,"Speficially, this can happen when the versions ",(0,i.mdx)("inlineCode",{parentName:"p"},"0.0.x")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"0.1.x")," are mixed. Version ",(0,i.mdx)("inlineCode",{parentName:"p"},"0.1.0")," of FBJNI\nswitched to using ",(0,i.mdx)("a",{parentName:"p",href:"https://google.github.io/prefab/"},"Google Prefab"),' for distributing native artifacts,\nwhich made the split into combined, "java-only" and "header" packages redundant and only requires\na single dependency in your projects.'),(0,i.mdx)("p",null,'When including both "fbjni-java-only:0.0.1" and "fbjni:0.1.0" in one project, you will now\nduplicate class errors during the build process. You must ensure that only one of the two\nversions is used in your entire dependency tree. Start by looking at ',(0,i.mdx)("inlineCode",{parentName:"p"},"./gradlew :myapp:dependencies"),"\nto see where the different version requirements come from. Then exclude the FBJNI dependency from\none of them, e.g."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-groovy"},"implementation(\"com.facebook.react:react-native:+\") {\n    exclude group:'com.facebook.fbjni'\n}\n"))))}g.isMDXComponent=!0}}]);